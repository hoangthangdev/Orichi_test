{"ast":null,"code":"import { useState, useCallback } from 'react';\nlet SelectionType = /*#__PURE__*/function (SelectionType) {\n  SelectionType[\"All\"] = \"all\";\n  SelectionType[\"Page\"] = \"page\";\n  SelectionType[\"Multi\"] = \"multi\";\n  SelectionType[\"Single\"] = \"single\";\n  SelectionType[\"Range\"] = \"range\";\n  return SelectionType;\n}({});\nfunction defaultResourceIDResolver(resource) {\n  if ('id' in resource) {\n    return resource.id;\n  }\n  throw new Error('Your resource does not directly contain an `id`. Pass a `resourceIDResolver` to `useIndexResourceState`');\n}\nfunction useIndexResourceState(resources) {\n  let {\n    selectedResources: initSelectedResources = [],\n    allResourcesSelected: initAllResourcesSelected = false,\n    resourceIDResolver = defaultResourceIDResolver,\n    resourceFilter = undefined\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    selectedResources: [],\n    allResourcesSelected: false,\n    resourceIDResolver: defaultResourceIDResolver,\n    resourceFilter: undefined\n  };\n  const [selectedResources, setSelectedResources] = useState(initSelectedResources);\n  const [allResourcesSelected, setAllResourcesSelected] = useState(initAllResourcesSelected);\n  const handleSelectionChange = useCallback((selectionType, isSelecting, selection, _position) => {\n    if (selectionType === SelectionType.All) {\n      setAllResourcesSelected(isSelecting);\n    } else if (allResourcesSelected) {\n      setAllResourcesSelected(false);\n    }\n    switch (selectionType) {\n      case SelectionType.Single:\n        setSelectedResources(newSelectedResources => isSelecting ? [...newSelectedResources, selection] : newSelectedResources.filter(id => id !== selection));\n        break;\n      case SelectionType.All:\n      case SelectionType.Page:\n        if (resourceFilter) {\n          const filteredResources = resources.filter(resourceFilter);\n          setSelectedResources(isSelecting && selectedResources.length < filteredResources.length ? filteredResources.map(resourceIDResolver) : []);\n        } else {\n          setSelectedResources(isSelecting ? resources.map(resourceIDResolver) : []);\n        }\n        break;\n      case SelectionType.Multi:\n        if (!selection) break;\n        setSelectedResources(currentSelectedResources => {\n          const ids = [];\n          const filteredResources = resourceFilter ? resources.filter(resourceFilter) : resources;\n          for (let i = selection[0]; i <= selection[1]; i++) {\n            if (filteredResources.includes(resources[i])) {\n              const id = resourceIDResolver(resources[i]);\n              if (isSelecting && !currentSelectedResources.includes(id) || !isSelecting && currentSelectedResources.includes(id)) {\n                ids.push(id);\n              }\n            }\n          }\n          return isSelecting ? [...currentSelectedResources, ...ids] : currentSelectedResources.filter(id => !ids.includes(id));\n        });\n        break;\n      case SelectionType.Range:\n        if (!selection) break;\n        setSelectedResources(currentSelectedResources => {\n          const filteredResources = resourceFilter ? resources.filter(resourceFilter) : resources;\n          const resourceIds = filteredResources.map(resourceIDResolver);\n          const selectedIds = resourceIds.slice(Number(selection[0]), Number(selection[1]) + 1);\n          const isIndeterminate = selectedIds.some(id => {\n            return selectedResources.includes(id);\n          });\n          const isChecked = selectedIds.every(id => {\n            return selectedResources.includes(id);\n          });\n          const isSelectingAllInRange = !isChecked && (isSelecting || isIndeterminate);\n          const nextSelectedResources = isSelectingAllInRange ? [...new Set([...currentSelectedResources, ...selectedIds]).values()] : currentSelectedResources.filter(id => !selectedIds.includes(id));\n          return nextSelectedResources;\n        });\n        break;\n    }\n  }, [allResourcesSelected, resourceFilter, selectedResources, resources, resourceIDResolver]);\n  const clearSelection = useCallback(() => {\n    setSelectedResources([]);\n    setAllResourcesSelected(false);\n  }, []);\n  const removeSelectedResources = useCallback(removeResources => {\n    const selectedResourcesCopy = [...selectedResources];\n    const newSelectedResources = selectedResourcesCopy.filter(resource => !removeResources.includes(resource));\n    setSelectedResources(newSelectedResources);\n    if (newSelectedResources.length === 0) {\n      setAllResourcesSelected(false);\n    }\n  }, [selectedResources]);\n  return {\n    selectedResources,\n    allResourcesSelected,\n    handleSelectionChange,\n    clearSelection,\n    removeSelectedResources\n  };\n}\nexport { SelectionType, useIndexResourceState };","map":{"version":3,"names":["useState","useCallback","SelectionType","defaultResourceIDResolver","resource","id","Error","useIndexResourceState","resources","selectedResources","initSelectedResources","allResourcesSelected","initAllResourcesSelected","resourceIDResolver","resourceFilter","undefined","arguments","length","setSelectedResources","setAllResourcesSelected","handleSelectionChange","selectionType","isSelecting","selection","_position","All","Single","newSelectedResources","filter","Page","filteredResources","map","Multi","currentSelectedResources","ids","i","includes","push","Range","resourceIds","selectedIds","slice","Number","isIndeterminate","some","isChecked","every","isSelectingAllInRange","nextSelectedResources","Set","values","clearSelection","removeSelectedResources","removeResources","selectedResourcesCopy"],"sources":["D:/tesst/test/node_modules/@shopify/polaris/build/esm/utilities/use-index-resource-state.js"],"sourcesContent":["import { useState, useCallback } from 'react';\n\nlet SelectionType = /*#__PURE__*/function (SelectionType) {\n  SelectionType[\"All\"] = \"all\";\n  SelectionType[\"Page\"] = \"page\";\n  SelectionType[\"Multi\"] = \"multi\";\n  SelectionType[\"Single\"] = \"single\";\n  SelectionType[\"Range\"] = \"range\";\n  return SelectionType;\n}({});\nfunction defaultResourceIDResolver(resource) {\n  if ('id' in resource) {\n    return resource.id;\n  }\n  throw new Error('Your resource does not directly contain an `id`. Pass a `resourceIDResolver` to `useIndexResourceState`');\n}\nfunction useIndexResourceState(resources, {\n  selectedResources: initSelectedResources = [],\n  allResourcesSelected: initAllResourcesSelected = false,\n  resourceIDResolver = defaultResourceIDResolver,\n  resourceFilter = undefined\n} = {\n  selectedResources: [],\n  allResourcesSelected: false,\n  resourceIDResolver: defaultResourceIDResolver,\n  resourceFilter: undefined\n}) {\n  const [selectedResources, setSelectedResources] = useState(initSelectedResources);\n  const [allResourcesSelected, setAllResourcesSelected] = useState(initAllResourcesSelected);\n  const handleSelectionChange = useCallback((selectionType, isSelecting, selection, _position) => {\n    if (selectionType === SelectionType.All) {\n      setAllResourcesSelected(isSelecting);\n    } else if (allResourcesSelected) {\n      setAllResourcesSelected(false);\n    }\n    switch (selectionType) {\n      case SelectionType.Single:\n        setSelectedResources(newSelectedResources => isSelecting ? [...newSelectedResources, selection] : newSelectedResources.filter(id => id !== selection));\n        break;\n      case SelectionType.All:\n      case SelectionType.Page:\n        if (resourceFilter) {\n          const filteredResources = resources.filter(resourceFilter);\n          setSelectedResources(isSelecting && selectedResources.length < filteredResources.length ? filteredResources.map(resourceIDResolver) : []);\n        } else {\n          setSelectedResources(isSelecting ? resources.map(resourceIDResolver) : []);\n        }\n        break;\n      case SelectionType.Multi:\n        if (!selection) break;\n        setSelectedResources(currentSelectedResources => {\n          const ids = [];\n          const filteredResources = resourceFilter ? resources.filter(resourceFilter) : resources;\n          for (let i = selection[0]; i <= selection[1]; i++) {\n            if (filteredResources.includes(resources[i])) {\n              const id = resourceIDResolver(resources[i]);\n              if (isSelecting && !currentSelectedResources.includes(id) || !isSelecting && currentSelectedResources.includes(id)) {\n                ids.push(id);\n              }\n            }\n          }\n          return isSelecting ? [...currentSelectedResources, ...ids] : currentSelectedResources.filter(id => !ids.includes(id));\n        });\n        break;\n      case SelectionType.Range:\n        if (!selection) break;\n        setSelectedResources(currentSelectedResources => {\n          const filteredResources = resourceFilter ? resources.filter(resourceFilter) : resources;\n          const resourceIds = filteredResources.map(resourceIDResolver);\n          const selectedIds = resourceIds.slice(Number(selection[0]), Number(selection[1]) + 1);\n          const isIndeterminate = selectedIds.some(id => {\n            return selectedResources.includes(id);\n          });\n          const isChecked = selectedIds.every(id => {\n            return selectedResources.includes(id);\n          });\n          const isSelectingAllInRange = !isChecked && (isSelecting || isIndeterminate);\n          const nextSelectedResources = isSelectingAllInRange ? [...new Set([...currentSelectedResources, ...selectedIds]).values()] : currentSelectedResources.filter(id => !selectedIds.includes(id));\n          return nextSelectedResources;\n        });\n        break;\n    }\n  }, [allResourcesSelected, resourceFilter, selectedResources, resources, resourceIDResolver]);\n  const clearSelection = useCallback(() => {\n    setSelectedResources([]);\n    setAllResourcesSelected(false);\n  }, []);\n  const removeSelectedResources = useCallback(removeResources => {\n    const selectedResourcesCopy = [...selectedResources];\n    const newSelectedResources = selectedResourcesCopy.filter(resource => !removeResources.includes(resource));\n    setSelectedResources(newSelectedResources);\n    if (newSelectedResources.length === 0) {\n      setAllResourcesSelected(false);\n    }\n  }, [selectedResources]);\n  return {\n    selectedResources,\n    allResourcesSelected,\n    handleSelectionChange,\n    clearSelection,\n    removeSelectedResources\n  };\n}\n\nexport { SelectionType, useIndexResourceState };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}