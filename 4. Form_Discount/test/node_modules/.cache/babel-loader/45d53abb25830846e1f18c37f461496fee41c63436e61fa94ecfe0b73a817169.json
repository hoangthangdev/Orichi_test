{"ast":null,"code":"import React, { PureComponent } from 'react';\nimport { isServer } from '../../../../utilities/target.js';\nimport styles from '../../ColorPicker.css.js';\nimport { EventListener } from '../../../EventListener/EventListener.js';\nlet isDragging = false;\n\n// Required to solve a bug causing the underlying page/container to scroll\n// while trying to drag the ColorPicker controls.\n// This must be called as soon as possible to properly prevent the event.\n// `passive: false` must also be set, as it seems webkit has changed the \"default\" behaviour\n// https://bugs.webkit.org/show_bug.cgi?id=182521\nif (!isServer) {\n  window.addEventListener('touchmove', event => {\n    if (!isDragging) {\n      return;\n    }\n    event.preventDefault();\n  }, {\n    passive: false\n  });\n}\nclass Slidable extends PureComponent {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      dragging: false\n    };\n    this.node = null;\n    this.draggerNode = null;\n    this.setDraggerNode = node => {\n      this.draggerNode = node;\n    };\n    this.setNode = node => {\n      this.node = node;\n    };\n    this.startDrag = event => {\n      if (isMouseDownEvent(event)) {\n        this.handleDraggerMove(event.clientX, event.clientY);\n      }\n      isDragging = true;\n      this.setState({\n        dragging: true\n      });\n    };\n    this.handleDragEnd = () => {\n      isDragging = false;\n      this.setState({\n        dragging: false\n      });\n    };\n    this.handleMove = event => {\n      event.stopImmediatePropagation();\n      event.stopPropagation();\n      if (event.cancelable) {\n        event.preventDefault();\n      }\n      if (isMouseMoveEvent(event)) {\n        this.handleDraggerMove(event.clientX, event.clientY);\n        return;\n      }\n      this.handleDraggerMove(event.touches[0].clientX, event.touches[0].clientY);\n    };\n    this.handleDraggerMove = (x, y) => {\n      if (this.node == null) {\n        return;\n      }\n      const {\n        onChange\n      } = this.props;\n      const rect = this.node.getBoundingClientRect();\n      const offsetX = x - rect.left;\n      const offsetY = y - rect.top;\n      onChange({\n        x: offsetX,\n        y: offsetY\n      });\n    };\n  }\n  componentWillUnmount() {\n    this.observer?.disconnect();\n  }\n  componentDidMount() {\n    if (!this.node) {\n      return;\n    }\n    this.observer = new ResizeObserver(() => {\n      /**\r\n       * This is a workaround to enable event listeners to be\r\n       * re-attached when moving from one document to another\r\n       * when using a React portal across iframes.\r\n       * Using a resize observer works because when the clientWidth\r\n       * will go from 0 to the real width after the node\r\n       * gets rendered in its new place.\r\n       */\n      const {\n        window\n      } = this.state;\n      if (window !== this.node?.ownerDocument.defaultView) {\n        this.setState({\n          window: this.node?.ownerDocument.defaultView\n        });\n      }\n      this.handleResize();\n    });\n    this.observer.observe(this.node);\n    this.handleResize();\n  }\n  render() {\n    const {\n      dragging,\n      window\n    } = this.state;\n    const {\n      draggerX = 0,\n      draggerY = 0\n    } = this.props;\n    const draggerPositioning = {\n      transform: `translate3d(${draggerX}px, ${draggerY}px, 0)`\n    };\n    const moveListener = dragging ? /*#__PURE__*/React.createElement(EventListener, {\n      event: \"mousemove\",\n      handler: this.handleMove,\n      passive: false,\n      window: window\n    }) : null;\n    const touchMoveListener = dragging ? /*#__PURE__*/React.createElement(EventListener, {\n      event: \"touchmove\",\n      handler: this.handleMove,\n      passive: false,\n      window: window\n    }) : null;\n    const endDragListener = dragging ? /*#__PURE__*/React.createElement(EventListener, {\n      event: \"mouseup\",\n      handler: this.handleDragEnd,\n      window: window\n    }) : null;\n    const touchEndListener = dragging ? /*#__PURE__*/React.createElement(EventListener, {\n      event: \"touchend\",\n      handler: this.handleDragEnd,\n      window: window\n    }) : null;\n    const touchCancelListener = dragging ? /*#__PURE__*/React.createElement(EventListener, {\n      event: \"touchcancel\",\n      handler: this.handleDragEnd,\n      window: window\n    }) : null;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      ref: this.setNode,\n      className: styles.Slidable,\n      onMouseDown: this.startDrag,\n      onTouchStart: this.startDrag\n    }, endDragListener, moveListener, touchMoveListener, touchEndListener, touchCancelListener, /*#__PURE__*/React.createElement(\"div\", {\n      style: draggerPositioning,\n      className: styles.Dragger,\n      ref: this.setDraggerNode\n    }));\n  }\n  handleResize() {\n    const {\n      onDraggerHeight\n    } = this.props;\n    if (!onDraggerHeight) {\n      return;\n    }\n    const {\n      draggerNode\n    } = this;\n    if (!draggerNode) {\n      return;\n    }\n    onDraggerHeight(draggerNode.clientWidth);\n    if (process.env.NODE_ENV === 'development') {\n      setTimeout(() => {\n        onDraggerHeight(draggerNode.clientWidth);\n      }, 0);\n    }\n  }\n}\nfunction isMouseMoveEvent(event) {\n  return event.type === 'mousemove';\n}\nfunction isMouseDownEvent(event) {\n  return event.type === 'mousedown';\n}\nexport { Slidable };","map":{"version":3,"names":["React","PureComponent","isServer","styles","EventListener","isDragging","window","addEventListener","event","preventDefault","passive","Slidable","constructor","args","state","dragging","node","draggerNode","setDraggerNode","setNode","startDrag","isMouseDownEvent","handleDraggerMove","clientX","clientY","setState","handleDragEnd","handleMove","stopImmediatePropagation","stopPropagation","cancelable","isMouseMoveEvent","touches","x","y","onChange","props","rect","getBoundingClientRect","offsetX","left","offsetY","top","componentWillUnmount","observer","disconnect","componentDidMount","ResizeObserver","ownerDocument","defaultView","handleResize","observe","render","draggerX","draggerY","draggerPositioning","transform","moveListener","createElement","handler","touchMoveListener","endDragListener","touchEndListener","touchCancelListener","ref","className","onMouseDown","onTouchStart","style","Dragger","onDraggerHeight","clientWidth","process","env","NODE_ENV","setTimeout","type"],"sources":["D:/Orichi_test/4. Form_Discount/test/node_modules/@shopify/polaris/build/esm/components/ColorPicker/components/Slidable/Slidable.js"],"sourcesContent":["import React, { PureComponent } from 'react';\r\nimport { isServer } from '../../../../utilities/target.js';\r\nimport styles from '../../ColorPicker.css.js';\r\nimport { EventListener } from '../../../EventListener/EventListener.js';\r\n\r\nlet isDragging = false;\r\n\r\n// Required to solve a bug causing the underlying page/container to scroll\r\n// while trying to drag the ColorPicker controls.\r\n// This must be called as soon as possible to properly prevent the event.\r\n// `passive: false` must also be set, as it seems webkit has changed the \"default\" behaviour\r\n// https://bugs.webkit.org/show_bug.cgi?id=182521\r\nif (!isServer) {\r\n  window.addEventListener('touchmove', event => {\r\n    if (!isDragging) {\r\n      return;\r\n    }\r\n    event.preventDefault();\r\n  }, {\r\n    passive: false\r\n  });\r\n}\r\nclass Slidable extends PureComponent {\r\n  constructor(...args) {\r\n    super(...args);\r\n    this.state = {\r\n      dragging: false\r\n    };\r\n    this.node = null;\r\n    this.draggerNode = null;\r\n    this.setDraggerNode = node => {\r\n      this.draggerNode = node;\r\n    };\r\n    this.setNode = node => {\r\n      this.node = node;\r\n    };\r\n    this.startDrag = event => {\r\n      if (isMouseDownEvent(event)) {\r\n        this.handleDraggerMove(event.clientX, event.clientY);\r\n      }\r\n      isDragging = true;\r\n      this.setState({\r\n        dragging: true\r\n      });\r\n    };\r\n    this.handleDragEnd = () => {\r\n      isDragging = false;\r\n      this.setState({\r\n        dragging: false\r\n      });\r\n    };\r\n    this.handleMove = event => {\r\n      event.stopImmediatePropagation();\r\n      event.stopPropagation();\r\n      if (event.cancelable) {\r\n        event.preventDefault();\r\n      }\r\n      if (isMouseMoveEvent(event)) {\r\n        this.handleDraggerMove(event.clientX, event.clientY);\r\n        return;\r\n      }\r\n      this.handleDraggerMove(event.touches[0].clientX, event.touches[0].clientY);\r\n    };\r\n    this.handleDraggerMove = (x, y) => {\r\n      if (this.node == null) {\r\n        return;\r\n      }\r\n      const {\r\n        onChange\r\n      } = this.props;\r\n      const rect = this.node.getBoundingClientRect();\r\n      const offsetX = x - rect.left;\r\n      const offsetY = y - rect.top;\r\n      onChange({\r\n        x: offsetX,\r\n        y: offsetY\r\n      });\r\n    };\r\n  }\r\n  componentWillUnmount() {\r\n    this.observer?.disconnect();\r\n  }\r\n  componentDidMount() {\r\n    if (!this.node) {\r\n      return;\r\n    }\r\n    this.observer = new ResizeObserver(() => {\r\n      /**\r\n       * This is a workaround to enable event listeners to be\r\n       * re-attached when moving from one document to another\r\n       * when using a React portal across iframes.\r\n       * Using a resize observer works because when the clientWidth\r\n       * will go from 0 to the real width after the node\r\n       * gets rendered in its new place.\r\n       */\r\n      const {\r\n        window\r\n      } = this.state;\r\n      if (window !== this.node?.ownerDocument.defaultView) {\r\n        this.setState({\r\n          window: this.node?.ownerDocument.defaultView\r\n        });\r\n      }\r\n      this.handleResize();\r\n    });\r\n    this.observer.observe(this.node);\r\n    this.handleResize();\r\n  }\r\n  render() {\r\n    const {\r\n      dragging,\r\n      window\r\n    } = this.state;\r\n    const {\r\n      draggerX = 0,\r\n      draggerY = 0\r\n    } = this.props;\r\n    const draggerPositioning = {\r\n      transform: `translate3d(${draggerX}px, ${draggerY}px, 0)`\r\n    };\r\n    const moveListener = dragging ? /*#__PURE__*/React.createElement(EventListener, {\r\n      event: \"mousemove\",\r\n      handler: this.handleMove,\r\n      passive: false,\r\n      window: window\r\n    }) : null;\r\n    const touchMoveListener = dragging ? /*#__PURE__*/React.createElement(EventListener, {\r\n      event: \"touchmove\",\r\n      handler: this.handleMove,\r\n      passive: false,\r\n      window: window\r\n    }) : null;\r\n    const endDragListener = dragging ? /*#__PURE__*/React.createElement(EventListener, {\r\n      event: \"mouseup\",\r\n      handler: this.handleDragEnd,\r\n      window: window\r\n    }) : null;\r\n    const touchEndListener = dragging ? /*#__PURE__*/React.createElement(EventListener, {\r\n      event: \"touchend\",\r\n      handler: this.handleDragEnd,\r\n      window: window\r\n    }) : null;\r\n    const touchCancelListener = dragging ? /*#__PURE__*/React.createElement(EventListener, {\r\n      event: \"touchcancel\",\r\n      handler: this.handleDragEnd,\r\n      window: window\r\n    }) : null;\r\n    return /*#__PURE__*/React.createElement(\"div\", {\r\n      ref: this.setNode,\r\n      className: styles.Slidable,\r\n      onMouseDown: this.startDrag,\r\n      onTouchStart: this.startDrag\r\n    }, endDragListener, moveListener, touchMoveListener, touchEndListener, touchCancelListener, /*#__PURE__*/React.createElement(\"div\", {\r\n      style: draggerPositioning,\r\n      className: styles.Dragger,\r\n      ref: this.setDraggerNode\r\n    }));\r\n  }\r\n  handleResize() {\r\n    const {\r\n      onDraggerHeight\r\n    } = this.props;\r\n    if (!onDraggerHeight) {\r\n      return;\r\n    }\r\n    const {\r\n      draggerNode\r\n    } = this;\r\n    if (!draggerNode) {\r\n      return;\r\n    }\r\n    onDraggerHeight(draggerNode.clientWidth);\r\n    if (process.env.NODE_ENV === 'development') {\r\n      setTimeout(() => {\r\n        onDraggerHeight(draggerNode.clientWidth);\r\n      }, 0);\r\n    }\r\n  }\r\n}\r\nfunction isMouseMoveEvent(event) {\r\n  return event.type === 'mousemove';\r\n}\r\nfunction isMouseDownEvent(event) {\r\n  return event.type === 'mousedown';\r\n}\r\n\r\nexport { Slidable };\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}